<div class="dashboard-container">
  <!-- Sidebar -->
  <nav class="sidebar">
    <h2 class="logo">ChamaHubğŸ’°</h2>
    <ul class="nav-links">
      <li>
        <a routerLink="/user-dashboard" routerLinkActive="active">ğŸ  Home</a>
      </li>
      <li>
        <a href="#" (click)="openModal($event)">ğŸ“Š Loan Calculator</a>
      </li>
      <li>
        <a routerLink="/user-contributions" routerLinkActive="active">ğŸ’° My Contributions</a>
      </li>
      <li>
        <a routerLink="/loan-application" routerLinkActive="active">ğŸ“ Apply for Loan</a>
      </li>
      <li>
        <a routerLink="/view-loan-status" routerLinkActive="active">ğŸ“„ View Loan Status</a>
      </li>
      <li>
        <a routerLink="/user-loan-payment" routerLinkActive="active">ğŸ’µ Loan Payment</a>
      </li>
    </ul>
    <button class="logout-btn" (click)="logout()">ğŸšª Logout</button>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Hero -->
    <section class="hero">
      <h1>Welcome to <span>ChamaHubğŸ’°</span></h1>
      <p>
        Empowering chama members through savings, loans, and community growth.
        Manage your contributions, apply for loans, and build financial freedom together.
      </p>
    </section>

    <!-- âœ… Quick Stats Section -->
    <section class="quick-stats">
      <div class="stat-card">
        <h3>ğŸ’° Total Contributions</h3>
        <p>{{ totalContributions | currency:'KES' }}</p>
      </div>

      <div class="stat-card">
        <h3>ğŸ’µ Active Loans</h3>
        <p>{{ activeLoans }}</p>
      </div>

      <!-- âœ… Next Due Date (Updated to match your TS) -->
      <div class="stat-card">
        <h3>ğŸ“… Next Due Date</h3>
        <ng-container *ngIf="nextDueDate; else notYourTurn">
          <p class="highlight-text">
            ğŸ‰ Youâ€™re next for payout! <br />
            <span class="highlight-date">{{ nextDueDate | date:'fullDate' }}</span>
          </p>
        </ng-container>

        <ng-template #notYourTurn>
          <p>No upcoming payout for you yet.</p>
        </ng-template>
      </div>

      <div class="stat-card">
        <h3>ğŸ“ˆ Group Balance</h3>
        <p>{{ chamaBalance | currency:'KES' }}</p>
      </div>
    </section>

    <!-- Financial Insights -->
    <section class="financial-education">
      <h2>ğŸ“š Chama Insights</h2>
      <div class="cards">
        <div class="card">
          <h3>ğŸŒ± Save Together</h3>
          <p>Grow your chama savings and achieve financial security as a team.</p>
        </div>
        <div class="card">
          <h3>ğŸ¤ Access Loans</h3>
          <p>Apply for affordable chama-backed loans with flexible repayment terms.</p>
        </div>
        <div class="card">
          <h3>ğŸ“ˆ Build Wealth</h3>
          <p>Invest as a chama and increase your collective financial strength.</p>
        </div>
      </div>
    </section>

    <!-- Loan Calculator Modal -->
    <div class="modal-overlay" [class.show]="isModalOpen" (click)="closeModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <h2>ğŸ“Š Loan Calculator</h2>
        <div class="calculator-box">
          <label>Loan Amount (KES):</label>
          <input type="number" [(ngModel)]="loanAmount" placeholder="Enter amount" />

          <label>Interest Rate (%):</label>
          <input type="number" [(ngModel)]="interestRate" placeholder="Enter rate" />

          <label>Loan Term (Months):</label>
          <input type="number" [(ngModel)]="loanTerm" placeholder="Enter term" />

          <button class="calculate-btn" (click)="calculateLoan()">Calculate</button>

          <div *ngIf="monthlyPayment !== null" class="result-box">
            <h3>
              Estimated Monthly Payment:
              <span>KES {{ monthlyPayment | number:'1.2-2' }}</span>
            </h3>
          </div>

          <button class="close-btn" (click)="closeModal()">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>
